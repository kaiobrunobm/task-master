# task-master

task-master is a simple Node.js/Express REST API application for managing a todo list, powered by PostgreSQL and Prisma ORM.

## Features

- **Add tasks**: Quickly create new todo tasks via REST API.
- **Remove tasks**: Delete tasks by their ID.
- **Update tasks**: Edit the title, description, or completion status of tasks by ID.
- **Complete tasks**: Mark tasks as completed or not.
- **List tasks**: Retrieve all your tasks, including completion status and IDs.
- Tasks are persisted in a PostgreSQL database, using Prisma as the ORM.

## Getting Started

### Prerequisites

- [Node.js](https://nodejs.org/) (v18+ recommended)
- [PostgreSQL](https://www.postgresql.org/) (locally or via cloud)
- [npm](https://www.npmjs.com/) (comes with Node.js)

### Installation

1. **Clone the repository:**
   ```bash
   git clone https://github.com/kaiobrunobm/task-master.git
   cd task-master
   ```

2. **Install dependencies:**
   ```bash
   npm install
   ```

3. **Set up your `.env` file:**

   Create a `.env` file in the project root with your database credentials:

   ```
   DATABASE_URL=postgresql://USER:PASSWORD@HOST:PORT/DATABASE
   SERVER_PORT=3000
   ```

4. **Generate the Prisma client:**
   ```bash
   npx prisma generate
   ```

5. **Apply database migrations (if needed):**
   ```bash
   npx prisma db push
   ```

### Usage

Start the server:

```bash
npm start
```

By default, the server runs on port 3000 (or the port set in your `.env`).

#### Get All Tasks

```
GET /tasks
```

#### Add a Task

```
POST /tasks
Content-Type: application/json

{
  "title": "Your task title",
  "description": "Optional description"
}
```

#### Update a Task

```
PUT /tasks/:id
Content-Type: application/json

{
  "title": "New title (optional)",
  "description": "New description (optional)",
  "completed": true
}
```

- Update any combination of the above fields.
- Returns the updated task object.

#### Remove a Task

```
DELETE /tasks/:id
```

- Deletes a task by its ID.
- Returns status 204 if successful, 404 if not found.

#### Example: Fetch tasks with curl

```bash
curl http://localhost:3000/tasks
```

### Example Response

```json
[
  {
    "id": 1,
    "title": "Buy groceries",
    "description": "Milk, eggs, and bread",
    "completed": false,
    "createdAt": "2024-06-15T16:12:00.000Z",
    "updatedAt": "2024-06-15T16:12:00.000Z"
  }
]
```

## File Structure

- `index.js`: Entry point for the REST API server.
- `lib/prisma.js`: Prisma client and database connection logic.
- `prisma/schema.prisma`: Prisma database schema (models, datasource).
- `.env`: Configuration for database connection (not committed to version control).

## Notes

- Each task has a unique integer ID generated by the database.
- Supports full CRUD: create, read, update, delete for tasks.
- All data is stored and retrieved directly from a PostgreSQL database.

## License

MIT
